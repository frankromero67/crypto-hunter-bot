name: Crypto Contribution Hunter

on:
  schedule:
    # Запускать каждый понедельник в 04:00 UTC
    - cron: '0 4 * * 1' 
  workflow_dispatch: # Позволяет запускать вручную

jobs:
  hunt_for_typos:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.x'

      - name: Install dependencies
        run: |
          pip install requests

      - name: Run Crypto Hunter Script
        env:
          # Передаем наш секретный токен в скрипт
          PAT_CRYPTO_MONITOR: ${{ secrets.PAT_CRYPTO_MONITOR }}
        run: python hunter.py

      - name: Notify on Target Found (Уведомление)
        # Этот шаг сработает, только если скрипт нашел цель (поскольку мы не создаем лог-файл в примере, этот шаг можно оставить для будущего расширения)
        # Для простоты, мы просто проверяем успешное выполнение скрипта на этом этапе.
        if: success()
        run: |
          # Если скрипт завершился успешно, проверяем его вывод
          echo "Скрипт мониторинга запущен. Проверьте логи на наличие сообщений 'НАЙДЕНА ЦЕЛЬ!'"
